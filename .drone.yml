---
### Autogenerated pipeline! DONT edit! ###
kind: pipeline
name: build-arm64
node_selector:
  kubernetes.io/arch: arm64
platform:
  arch: arm64
  os: linux
  variant: v8
resources:
  requests:
    memory: 256Mi
steps:
- image: plugins/docker
  name: static
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm64
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-static
    target: static
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php7
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm64
    build_args:
    - PHPVERSION=7
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php7
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php8
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm64
    build_args:
    - PHPVERSION=8
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php8
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
type: kubernetes
volumes:
- name: docker
  temp: {}
---
### Autogenerated pipeline! DONT edit! ###
kind: pipeline
name: build-arm
node_selector:
  kubernetes.io/arch: arm
platform:
  arch: arm
  os: linux
  variant: v7
resources:
  requests:
    memory: 256Mi
steps:
- image: plugins/docker
  name: static
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-static
    target: static
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php7
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm
    build_args:
    - PHPVERSION=7
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php7
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php8
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: arm
    build_args:
    - PHPVERSION=8
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php8
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
type: kubernetes
volumes:
- name: docker
  temp: {}
---
### Autogenerated pipeline! DONT edit! ###
kind: pipeline
name: build-amd64
node_selector:
  kubernetes.io/arch: amd64
platform:
  arch: amd64
  os: linux
resources:
  requests:
    memory: 256Mi
steps:
- image: plugins/docker
  name: static
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: amd64
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-static
    target: static
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php7
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: amd64
    build_args:
    - PHPVERSION=7
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php7
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
- image: plugins/docker
  name: php8
  privileged: true
  pull: always
  settings:
    auto_tag: true
    auto_tag_suffix: amd64
    build_args:
    - PHPVERSION=8
    insecure: true
    registry: registry.lan
    repo: registry.lan/krichy/webhost-php8
    target: php
  volumes:
  - name: docker
    path: /var/lib/docker
type: kubernetes
volumes:
- name: docker
  temp: {}
---
depends_on:
- build-arm64
- build-arm
- build-amd64
kind: pipeline
name: manifest
platform:
  arch: arm64
  os: linux
  variant: v8
steps:
- image: plugins/manifest
  name: registry.lan/krichy/webhost-static
  pull: always
  settings:
    auto_tag: true
    insecure: true
    registry: registry.lan
    spec: manifests/registry.lan-krichy-webhost-static.tmpl
- image: plugins/manifest
  name: registry.lan/krichy/webhost-php7
  pull: always
  settings:
    auto_tag: true
    insecure: true
    registry: registry.lan
    spec: manifests/registry.lan-krichy-webhost-php7.tmpl
- image: plugins/manifest
  name: registry.lan/krichy/webhost-php8
  pull: always
  settings:
    auto_tag: true
    insecure: true
    registry: registry.lan
    spec: manifests/registry.lan-krichy-webhost-php8.tmpl
type: kubernetes
